{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 头部时间选择 -->\r\n    <view class=\"header-section\">\r\n      <view class=\"welcome-title\">收入统计</view>\r\n      <view class=\"time-selector\">\r\n        <view class=\"time-tabs\">\r\n          <view \r\n            class=\"time-tab\" \r\n            :class=\"{ active: currentTimeType === 'monthly' }\"\r\n            @click=\"switchTimeType('monthly')\"\r\n          >\r\n            按月\r\n          </view>\r\n          <view \r\n            class=\"time-tab\" \r\n            :class=\"{ active: currentTimeType === 'yearly' }\"\r\n            @click=\"switchTimeType('yearly')\"\r\n          >\r\n            按年\r\n          </view>\r\n        </view>\r\n        <view class=\"time-picker\" @click=\"showTimePicker\">\r\n          <text>{{ currentPeriodText }}</text>\r\n          <text class=\"arrow\">▼</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 收入统计卡片 -->\r\n    <view class=\"income-section\">\r\n      <view class=\"income-overview\">\r\n        <view class=\"overview-item rent\">\r\n          <view class=\"overview-icon\">🏠</view>\r\n          <view class=\"overview-content\">\r\n            <view class=\"overview-amount\">¥{{ incomeStats.rent_income || 0 }}</view>\r\n            <view class=\"overview-label\">租金收入</view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"overview-item utility\">\r\n          <view class=\"overview-icon\">⚡</view>\r\n          <view class=\"overview-content\">\r\n            <view class=\"overview-amount\">¥{{ incomeStats.utility_income || 0 }}</view>\r\n            <view class=\"overview-label\">水电收入</view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"overview-item maintenance\">\r\n          <view class=\"overview-icon\">🔧</view>\r\n          <view class=\"overview-content\">\r\n            <view class=\"overview-amount\">¥{{ incomeStats.maintenance_expenses || 0 }}</view>\r\n            <view class=\"overview-label\">维修支出</view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"overview-item net\">\r\n          <view class=\"overview-icon\">💰</view>\r\n          <view class=\"overview-content\">\r\n            <view class=\"overview-amount profit\">¥{{ incomeStats.net_income || 0 }}</view>\r\n            <view class=\"overview-label\">净收入</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 房间出租情况 -->\r\n    <view class=\"occupancy-section\">\r\n      <view class=\"section-title\">房间出租情况</view>\r\n      <view class=\"occupancy-stats\">\r\n        <view class=\"occupancy-main\">\r\n          <view class=\"occupancy-rate\">\r\n            <view class=\"rate-circle\">\r\n              <view class=\"rate-text\">{{ occupancyStats.occupancy_rate || 0 }}%</view>\r\n              <view class=\"rate-label\">出租率</view>\r\n            </view>\r\n          </view>\r\n          <view class=\"occupancy-details\">\r\n            <view class=\"detail-item\">\r\n              <view class=\"detail-number\">{{ occupancyStats.total || 0 }}</view>\r\n              <view class=\"detail-label\">总房间</view>\r\n            </view>\r\n            <view class=\"detail-item rented\">\r\n              <view class=\"detail-number\">{{ occupancyStats.rented || 0 }}</view>\r\n              <view class=\"detail-label\">已出租</view>\r\n            </view>\r\n            <view class=\"detail-item available\">\r\n              <view class=\"detail-number\">{{ occupancyStats.available || 0 }}</view>\r\n              <view class=\"detail-label\">空闲</view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"rental-alerts\" v-if=\"rentalAlerts.expiring_soon > 0 || rentalAlerts.overdue > 0\">\r\n          <view class=\"alert-item warning\" v-if=\"rentalAlerts.expiring_soon > 0\">\r\n            <view class=\"alert-icon\">⚠️</view>\r\n            <view class=\"alert-text\">{{ rentalAlerts.expiring_soon }}个租约即将到期</view>\r\n          </view>\r\n          <view class=\"alert-item danger\" v-if=\"rentalAlerts.overdue > 0\">\r\n            <view class=\"alert-icon\">🚨</view>\r\n            <view class=\"alert-text\">{{ rentalAlerts.overdue }}个租约已过期</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 收入趋势图 -->\r\n    <view class=\"trend-section\" v-if=\"incomeTrend.length > 0\">\r\n      <view class=\"section-title\">收入趋势（最近6个月）</view>\r\n      <view class=\"trend-chart\">\r\n        <view class=\"trend-item\" v-for=\"(item, index) in incomeTrend\" :key=\"index\">\r\n          <view class=\"trend-bar\">\r\n            <view \r\n              class=\"trend-bar-fill rent\" \r\n              :style=\"{ height: getTrendBarHeight(item.rent_income) + '%' }\"\r\n            ></view>\r\n            <view \r\n              class=\"trend-bar-fill utility\" \r\n              :style=\"{ height: getTrendBarHeight(item.utility_income) + '%', bottom: getTrendBarHeight(item.rent_income) + '%' }\"\r\n            ></view>\r\n          </view>\r\n          <view class=\"trend-label\">{{ formatTrendMonth(item.month) }}</view>\r\n          <view class=\"trend-amount\">¥{{ item.rent_income + item.utility_income }}</view>\r\n        </view>\r\n      </view>\r\n      <view class=\"trend-legend\">\r\n        <view class=\"legend-item\">\r\n          <view class=\"legend-color rent\"></view>\r\n          <text>租金收入</text>\r\n        </view>\r\n        <view class=\"legend-item\">\r\n          <view class=\"legend-color utility\"></view>\r\n          <text>水电收入</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentTimeType: 'monthly', // monthly 或 yearly\r\n      currentYear: new Date().getFullYear(),\r\n      currentMonth: new Date().getMonth() + 1,\r\n      incomeStats: {\r\n        rent_income: 0,\r\n        utility_income: 0,\r\n        maintenance_expenses: 0,\r\n        net_income: 0,\r\n        period: ''\r\n      },\r\n      occupancyStats: {\r\n        total: 0,\r\n        rented: 0,\r\n        available: 0,\r\n        maintenance: 0,\r\n        occupancy_rate: 0\r\n      },\r\n      rentalAlerts: {\r\n        expiring_soon: 0,\r\n        overdue: 0\r\n      },\r\n      incomeTrend: [],\r\n      loading: false,\r\n      // 可选的时间范围\r\n      availableTimeRange: {\r\n        years: [],\r\n        months: []\r\n      }\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    currentPeriodText() {\r\n      if (this.currentTimeType === 'monthly') {\r\n        return `${this.currentYear}年${this.currentMonth}月`;\r\n      } else {\r\n        return `${this.currentYear}年`;\r\n      }\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    // 检查登录状态\r\n    this.checkAuth();\r\n    this.loadAvailableTimeRange();\r\n    this.loadDashboardData();\r\n  },\r\n  \r\n  onShow() {\r\n    // 页面显示时刷新数据\r\n    this.loadDashboardData();\r\n  },\r\n  \r\n  methods: {\r\n    // 检查认证状态\r\n    checkAuth() {\r\n      const { checkPageAuth } = require('../../utils/auth.js');\r\n      return checkPageAuth();\r\n    },\r\n    // 加载首页数据\r\n    async loadDashboardData() {\r\n      if (this.loading) return;\r\n      this.loading = true;\r\n      \r\n      try {\r\n        // 获取收入统计\r\n        await this.loadIncomeStats();\r\n        \r\n        // 获取房间出租统计\r\n        await this.loadOccupancyStats();\r\n        \r\n        // 获取收入趋势\r\n        await this.loadIncomeTrend();\r\n        \r\n      } catch (error) {\r\n        console.error('加载首页数据失败:', error);\r\n        uni.showToast({\r\n          title: '数据加载失败',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    // 加载可用时间范围\r\n    async loadAvailableTimeRange() {\r\n      try {\r\n        // 同时获取租赁数据和水电记录数据来确定时间范围\r\n        const [rentalsResult, utilityResult] = await Promise.all([\r\n          uniCloud.callFunction({\r\n            name: 'room-management',\r\n            data: { action: 'getRentals' }\r\n          }),\r\n          uniCloud.callFunction({\r\n            name: 'room-management',\r\n            data: { action: 'getUtilityRecords' }\r\n          })\r\n        ]);\r\n        \r\n        const rentals = rentalsResult.result.code === 0 ? rentalsResult.result.data.list : [];\r\n        const utilityRecords = utilityResult.result.code === 0 ? utilityResult.result.data.list : [];\r\n        \r\n        this.calculateAvailableTimeRange(rentals, utilityRecords);\r\n      } catch (error) {\r\n        console.error('加载时间范围失败:', error);\r\n        // 失败时使用默认范围\r\n        this.setDefaultTimeRange();\r\n      }\r\n    },\r\n    \r\n    // 根据租赁数据和水电记录计算可用时间范围\r\n    calculateAvailableTimeRange(rentals, utilityRecords) {\r\n      const dates = [];\r\n      const currentDate = new Date();\r\n      \r\n      // 添加当前月份\r\n      dates.push(currentDate);\r\n      \r\n      // 从租赁数据中提取日期\r\n      rentals.forEach(rental => {\r\n        if (rental.start_date) {\r\n          dates.push(new Date(rental.start_date));\r\n        }\r\n        if (rental.end_date) {\r\n          dates.push(new Date(rental.end_date));\r\n        }\r\n        if (rental.create_date) {\r\n          dates.push(new Date(rental.create_date));  \r\n        }\r\n      });\r\n      \r\n      // 从水电记录中提取日期\r\n      utilityRecords.forEach(record => {\r\n        if (record.record_date) {\r\n          dates.push(new Date(record.record_date));\r\n        }\r\n        if (record.create_date) {\r\n          dates.push(new Date(record.create_date));\r\n        }\r\n      });\r\n      \r\n      // 去重并排序\r\n      const uniqueDates = [...new Set(dates.map(date => date.getTime()))]\r\n        .map(time => new Date(time))\r\n        .sort((a, b) => a - b);\r\n      \r\n      if (uniqueDates.length === 0) {\r\n        this.setDefaultTimeRange();\r\n        return;\r\n      }\r\n      \r\n      const minDate = uniqueDates[0];\r\n      const maxDate = uniqueDates[uniqueDates.length - 1];\r\n      \r\n      // 生成年份范围（从最早年份到当前年份）\r\n      const minYear = minDate.getFullYear();\r\n      const maxYear = Math.max(currentDate.getFullYear(), maxDate.getFullYear());\r\n      \r\n      this.availableTimeRange.years = [];\r\n      for (let year = minYear; year <= maxYear; year++) {\r\n        this.availableTimeRange.years.push(year);\r\n      }\r\n      \r\n      // 确保当前年份和月份在可用范围内\r\n      if (!this.availableTimeRange.years.includes(this.currentYear)) {\r\n        this.currentYear = this.availableTimeRange.years[this.availableTimeRange.years.length - 1];\r\n      }\r\n      \r\n      // 生成当前年份的月份范围\r\n      this.updateAvailableMonths();\r\n      \r\n      // 确保当前月份在可用范围内\r\n      if (!this.availableTimeRange.months.includes(this.currentMonth)) {\r\n        this.currentMonth = this.availableTimeRange.months[this.availableTimeRange.months.length - 1] || 1;\r\n      }\r\n      \r\n      console.log('计算的时间范围:', {\r\n        years: this.availableTimeRange.years,\r\n        months: this.availableTimeRange.months,\r\n        currentYear: this.currentYear,\r\n        currentMonth: this.currentMonth\r\n      });\r\n    },\r\n    \r\n    // 更新可用月份（基于当前选中的年份和实际数据）\r\n    updateAvailableMonths() {\r\n      const currentDate = new Date();\r\n      const selectedYear = this.currentYear;\r\n      \r\n      this.availableTimeRange.months = [];\r\n      \r\n      // 如果是当前年份，显示到当前月份\r\n      if (selectedYear === currentDate.getFullYear()) {\r\n        for (let month = 1; month <= currentDate.getMonth() + 1; month++) {\r\n          this.availableTimeRange.months.push(month);\r\n        }\r\n      } else if (selectedYear < currentDate.getFullYear()) {\r\n        // 历史年份，显示所有月份\r\n        for (let month = 1; month <= 12; month++) {\r\n          this.availableTimeRange.months.push(month);\r\n        }\r\n      } else {\r\n        // 未来年份，暂时显示所有月份（实际使用中可能需要根据预期数据调整）\r\n        for (let month = 1; month <= 12; month++) {\r\n          this.availableTimeRange.months.push(month);\r\n        }\r\n      }\r\n      \r\n      // 确保至少有一个月份可选\r\n      if (this.availableTimeRange.months.length === 0) {\r\n        this.availableTimeRange.months.push(currentDate.getMonth() + 1);\r\n      }\r\n    },\r\n    \r\n    // 设置默认时间范围\r\n    setDefaultTimeRange() {\r\n      const currentDate = new Date();\r\n      const currentYear = currentDate.getFullYear();\r\n      \r\n      // 默认显示最近3年\r\n      this.availableTimeRange.years = [];\r\n      for (let year = currentYear - 2; year <= currentYear + 1; year++) {\r\n        this.availableTimeRange.years.push(year);\r\n      }\r\n      \r\n      this.updateAvailableMonths();\r\n    },\r\n    \r\n    // 加载收入统计\r\n    async loadIncomeStats() {\r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getIncomeStatistics',\r\n            data: {\r\n              year: this.currentYear,\r\n              month: this.currentTimeType === 'monthly' ? this.currentMonth : undefined,\r\n              type: this.currentTimeType\r\n            }\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          if (this.currentTimeType === 'yearly' && result.result.data.year_totals) {\r\n            this.incomeStats = result.result.data.year_totals;\r\n            this.incomeStats.period = result.result.data.period;\r\n          } else {\r\n            this.incomeStats = result.result.data;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('加载收入统计失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 加载房间出租统计\r\n    async loadOccupancyStats() {\r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getRoomOccupancyStatistics'\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          this.occupancyStats = result.result.data.room_status;\r\n          this.rentalAlerts = result.result.data.rental_activity;\r\n        }\r\n      } catch (error) {\r\n        console.error('加载房间统计失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 加载收入趋势\r\n    async loadIncomeTrend() {\r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getIncomeTrend'\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          this.incomeTrend = result.result.data;\r\n        }\r\n      } catch (error) {\r\n        console.error('加载收入趋势失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 切换时间类型\r\n    switchTimeType(type) {\r\n      if (this.currentTimeType === type) return;\r\n      this.currentTimeType = type;\r\n      this.loadIncomeStats();\r\n    },\r\n    \r\n    // 显示时间选择器\r\n    showTimePicker() {\r\n      if (this.currentTimeType === 'monthly') {\r\n        // 月份选择器 - 基于可用月份\r\n        if (this.availableTimeRange.months.length === 0) {\r\n          uni.showToast({\r\n            title: '暂无可用月份数据',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        const months = this.availableTimeRange.months.map(month => `${month}月`);\r\n        const currentIndex = this.availableTimeRange.months.indexOf(this.currentMonth);\r\n        \r\n        uni.showActionSheet({\r\n          itemList: months,\r\n          success: (res) => {\r\n            this.currentMonth = this.availableTimeRange.months[res.tapIndex];\r\n            this.loadIncomeStats();\r\n          }\r\n        });\r\n      } else {\r\n        // 年份选择器 - 基于可用年份\r\n        if (this.availableTimeRange.years.length === 0) {\r\n          uni.showToast({\r\n            title: '暂无可用年份数据',\r\n            icon: 'none'\r\n          });\r\n          return;\r\n        }\r\n        \r\n        const years = this.availableTimeRange.years.map(year => `${year}年`);\r\n        const currentIndex = this.availableTimeRange.years.indexOf(this.currentYear);\r\n        \r\n        uni.showActionSheet({\r\n          itemList: years,\r\n          success: (res) => {\r\n            this.currentYear = this.availableTimeRange.years[res.tapIndex];\r\n            // 年份改变时，更新可用月份\r\n            this.updateAvailableMonths();\r\n            // 如果当前月份不在新的可用月份中，设置为第一个可用月份\r\n            if (!this.availableTimeRange.months.includes(this.currentMonth)) {\r\n              this.currentMonth = this.availableTimeRange.months[0] || 1;\r\n            }\r\n            this.loadIncomeStats();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    \r\n    // 计算趋势图柱状高度\r\n    getTrendBarHeight(amount) {\r\n      if (this.incomeTrend.length === 0) return 0;\r\n      \r\n      const maxAmount = Math.max(...this.incomeTrend.map(item => \r\n        item.rent_income + item.utility_income\r\n      ));\r\n      \r\n      return maxAmount > 0 ? (amount / maxAmount) * 100 : 0;\r\n    },\r\n    \r\n    // 格式化趋势月份\r\n    formatTrendMonth(monthStr) {\r\n      const [year, month] = monthStr.split('-');\r\n      return `${month}月`;\r\n    },\r\n    \r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n  padding-bottom: 120rpx;\r\n  /* #ifdef H5 */\r\n  padding-bottom: 70px;\r\n  /* #endif */\r\n}\r\n\r\n/* 头部区域 */\r\n.header-section {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  padding: 60rpx 40rpx 40rpx;\r\n  color: white;\r\n}\r\n\r\n.welcome-title {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 30rpx;\r\n  text-align: center;\r\n}\r\n\r\n.time-selector {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.time-tabs {\r\n  display: flex;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 25rpx;\r\n  padding: 6rpx;\r\n}\r\n\r\n.time-tab {\r\n  padding: 12rpx 24rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.time-tab.active {\r\n  background: white;\r\n  color: #667eea;\r\n  font-weight: bold;\r\n}\r\n\r\n.time-picker {\r\n  display: flex;\r\n  align-items: center;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 12rpx 20rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.arrow {\r\n  margin-left: 8rpx;\r\n  font-size: 20rpx;\r\n}\r\n\r\n/* 收入统计 */\r\n.income-section {\r\n  margin: -20rpx 40rpx 30rpx;\r\n  background: white;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx 30rpx;\r\n  box-shadow: 0 8rpx 25rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.income-overview {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 30rpx;\r\n}\r\n\r\n.overview-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  border-radius: 16rpx;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.overview-item.rent {\r\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\r\n}\r\n\r\n.overview-item.utility {\r\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\r\n}\r\n\r\n.overview-item.maintenance {\r\n  background: linear-gradient(135deg, #fff3e0 0%, #ffcc02 100%);\r\n}\r\n\r\n.overview-item.net {\r\n  background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);\r\n}\r\n\r\n.overview-icon {\r\n  font-size: 40rpx;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.overview-amount {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.overview-amount.profit {\r\n  color: #4caf50;\r\n}\r\n\r\n.overview-label {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n/* 房间出租情况 */\r\n.occupancy-section {\r\n  background: white;\r\n  margin: 0 40rpx 30rpx;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx 30rpx;\r\n  box-shadow: 0 8rpx 25rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.occupancy-main {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.occupancy-rate {\r\n  margin-right: 40rpx;\r\n}\r\n\r\n.rate-circle {\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 50%;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n}\r\n\r\n.rate-text {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.rate-label {\r\n  font-size: 20rpx;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.occupancy-details {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n\r\n.detail-item {\r\n  text-align: center;\r\n}\r\n\r\n.detail-number {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.detail-item.rented .detail-number {\r\n  color: #f44336;\r\n}\r\n\r\n.detail-item.available .detail-number {\r\n  color: #4caf50;\r\n}\r\n\r\n.detail-label {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.rental-alerts {\r\n  border-top: 1rpx solid #f0f0f0;\r\n  padding-top: 20rpx;\r\n}\r\n\r\n.alert-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16rpx;\r\n  margin-bottom: 12rpx;\r\n  border-radius: 12rpx;\r\n}\r\n\r\n.alert-item.warning {\r\n  background: #fff3cd;\r\n  border: 1rpx solid #ffeaa7;\r\n}\r\n\r\n.alert-item.danger {\r\n  background: #f8d7da;\r\n  border: 1rpx solid #f5c6cb;\r\n}\r\n\r\n.alert-icon {\r\n  margin-right: 12rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.alert-text {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n}\r\n\r\n/* 收入趋势图 */\r\n.trend-section {\r\n  background: white;\r\n  margin: 0 40rpx 30rpx;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx 30rpx;\r\n  box-shadow: 0 8rpx 25rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.trend-chart {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: end;\r\n  height: 200rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.trend-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  flex: 1;\r\n}\r\n\r\n.trend-bar {\r\n  position: relative;\r\n  width: 40rpx;\r\n  height: 160rpx;\r\n  background: #f0f0f0;\r\n  border-radius: 20rpx;\r\n  margin-bottom: 12rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.trend-bar-fill {\r\n  position: absolute;\r\n  width: 100%;\r\n  border-radius: 20rpx;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.trend-bar-fill.rent {\r\n  background: linear-gradient(to top, #667eea 0%, #764ba2 100%);\r\n}\r\n\r\n.trend-bar-fill.utility {\r\n  background: linear-gradient(to top, #f093fb 0%, #f5576c 100%);\r\n}\r\n\r\n.trend-label {\r\n  font-size: 22rpx;\r\n  color: #666;\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.trend-amount {\r\n  font-size: 20rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.trend-legend {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 40rpx;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.legend-color {\r\n  width: 20rpx;\r\n  height: 20rpx;\r\n  border-radius: 4rpx;\r\n  margin-right: 8rpx;\r\n}\r\n\r\n.legend-color.rent {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n}\r\n\r\n.legend-color.utility {\r\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\r\n}\r\n\r\n</style>\r\n","import MiniProgramPage from '/Users/peakom/Documents/room-list/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}