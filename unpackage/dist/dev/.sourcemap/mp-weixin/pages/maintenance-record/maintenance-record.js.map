{"version":3,"file":"maintenance-record.js","sources":["pages/maintenance-record/maintenance-record.vue","pages/maintenance-record/maintenance-record.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- Êìç‰ΩúÊ†è -->\r\n    <view class=\"action-bar\">\r\n      <view class=\"search-box\">\r\n        <input \r\n          class=\"search-input\" \r\n          v-model=\"searchKeyword\" \r\n          placeholder=\"ÊêúÁ¥¢ÊàøÈó¥Âè∑...\"\r\n          @input=\"onSearch\"\r\n        />\r\n      </view>\r\n      <view class=\"add-btn\" @click=\"addRecord\">\r\n        <text class=\"add-icon\">+</text>\r\n        <text>Ê∑ªÂä†Áª¥‰øÆ</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÁªüËÆ°Âç°Áâá -->\r\n    <view class=\"stats-row\">\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">{{ statistics.totalRecords }}</text>\r\n        <text class=\"stat-label\">Áª¥‰øÆËÆ∞ÂΩï</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number cost\">¬•{{ statistics.totalCost }}</text>\r\n        <text class=\"stat-label\">ÊÄªË¥πÁî®</text>\r\n      </view>\r\n      <view class=\"stat-card\">\r\n        <text class=\"stat-number\">{{ statistics.thisMonthRecords }}</text>\r\n        <text class=\"stat-label\">Êú¨ÊúàÁª¥‰øÆ</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- Áª¥‰øÆËÆ∞ÂΩïÂàóË°® -->\r\n    <scroll-view class=\"record-list\" scroll-y=\"true\" @scrolltolower=\"loadMore\">\r\n      <view class=\"record-item\" v-for=\"record in recordList\" :key=\"record._id\" @click=\"viewRecord(record)\">\r\n        <view class=\"record-header\">\r\n          <view class=\"room-info\">\r\n            <text class=\"room-number\">üè† {{ record.room_info?.room_number }}Âè∑Êàø</text>\r\n            <view class=\"record-type\" :class=\"'type-' + record.maintenance_type\">\r\n              {{ getTypeText(record.maintenance_type) }}\r\n            </view>\r\n          </view>\r\n          <view class=\"record-cost\">\r\n            <text class=\"cost-amount\">¬•{{ record.cost }}</text>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"record-content\">\r\n          <text class=\"record-desc\">{{ record.description }}</text>\r\n          <view class=\"record-meta\">\r\n            <text class=\"record-date\">üìÖ {{ formatDate(record.maintenance_date) }}</text>\r\n            <text class=\"record-company\" v-if=\"record.maintenance_company\">\r\n              üîß {{ record.maintenance_company }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"record-status\">\r\n          <view class=\"status-badge\" :class=\"'status-' + record.status\">\r\n            {{ getStatusText(record.status) }}\r\n          </view>\r\n          <view class=\"warranty-info\" v-if=\"record.warranty_end_date && record.status === 'completed'\">\r\n            <text class=\"warranty-text\" :class=\"getWarrantyClass(record.warranty_end_date)\">\r\n              {{ getWarrantyText(record.warranty_end_date) }}\r\n            </text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- Âä†ËΩΩÊõ¥Â§ö -->\r\n      <view class=\"load-more\" v-if=\"hasMore\">\r\n        <text>{{ loading ? 'Âä†ËΩΩ‰∏≠...' : '‰∏äÊãâÂä†ËΩΩÊõ¥Â§ö' }}</text>\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <!-- Ê∑ªÂä†Áª¥‰øÆËÆ∞ÂΩïÂºπÁ™ó -->\r\n    <view class=\"modal-overlay\" v-if=\"showAddModal\" @click=\"hideAddModal\">\r\n      <view class=\"modal-content\" @click.stop>\r\n        <view class=\"modal-header\">\r\n          <text class=\"modal-title\">Ê∑ªÂä†Áª¥‰øÆËÆ∞ÂΩï</text>\r\n          <view class=\"modal-close\" @click=\"hideAddModal\">‚úï</view>\r\n        </view>\r\n        \r\n        <view class=\"modal-body\">\r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">ÊàøÈó¥</text>\r\n            <picker mode=\"selector\" :range=\"roomOptions\" range-key=\"label\" @change=\"onRoomChange\">\r\n              <view class=\"form-picker\">\r\n                <text class=\"picker-text\">{{ selectedRoom ? selectedRoom.label : 'ËØ∑ÈÄâÊã©ÊàøÈó¥' }}</text>\r\n                <text class=\"picker-arrow\">‚ñº</text>\r\n              </view>\r\n            </picker>\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Áª¥‰øÆÁ±ªÂûã</text>\r\n            <picker mode=\"selector\" :range=\"typeOptions\" range-key=\"label\" @change=\"onTypeChange\">\r\n              <view class=\"form-picker\">\r\n                <text class=\"picker-text\">{{ selectedType ? selectedType.label : 'ËØ∑ÈÄâÊã©Á±ªÂûã' }}</text>\r\n                <text class=\"picker-arrow\">‚ñº</text>\r\n              </view>\r\n            </picker>\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Áª¥‰øÆÊó•Êúü</text>\r\n            <picker mode=\"date\" :value=\"formData.maintenance_date\" @change=\"onDateChange\">\r\n              <view class=\"form-picker\">\r\n                <text class=\"picker-text\">{{ formData.maintenance_date || 'ËØ∑ÈÄâÊã©Êó•Êúü' }}</text>\r\n                <text class=\"picker-arrow\">üìÖ</text>\r\n              </view>\r\n            </picker>\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Áª¥‰øÆË¥πÁî®</text>\r\n            <input \r\n              class=\"form-input\" \r\n              v-model=\"formData.cost\" \r\n              type=\"digit\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•Ë¥πÁî®\"\r\n            />\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Áª¥‰øÆÊèèËø∞</text>\r\n            <textarea \r\n              class=\"form-textarea\" \r\n              v-model=\"formData.description\" \r\n              placeholder=\"ËØ∑ÊèèËø∞Áª¥‰øÆÂÜÖÂÆπ\"\r\n              maxlength=\"200\"\r\n            />\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">Áª¥‰øÆÂÖ¨Âè∏/‰∫∫ÂëòÔºàÂèØÈÄâÔºâ</text>\r\n            <input \r\n              class=\"form-input\" \r\n              v-model=\"formData.maintenance_company\" \r\n              placeholder=\"ËØ∑ËæìÂÖ•Áª¥‰øÆÂÖ¨Âè∏Êàñ‰∫∫Âëò\"\r\n            />\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"modal-footer\">\r\n          <button class=\"btn cancel-btn\" @click=\"hideAddModal\">ÂèñÊ∂à</button>\r\n          <button class=\"btn confirm-btn\" @click=\"submitRecord\">Á°ÆÂÆö</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      recordList: [],\r\n      loading: false,\r\n      hasMore: true,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      searchKeyword: '',\r\n      searchTimer: null,\r\n      statistics: {\r\n        totalRecords: 0,\r\n        totalCost: 0,\r\n        thisMonthRecords: 0\r\n      },\r\n      showAddModal: false,\r\n      roomOptions: [],\r\n      selectedRoom: null,\r\n      typeOptions: [\r\n        { value: 'plumbing', label: 'Ê∞¥ÁÆ°Áª¥‰øÆ' },\r\n        { value: 'electrical', label: 'ÁîµË∑ØÁª¥‰øÆ' },\r\n        { value: 'appliance', label: 'ÁîµÂô®Áª¥‰øÆ' },\r\n        { value: 'furniture', label: 'ÂÆ∂ÂÖ∑Áª¥‰øÆ' },\r\n        { value: 'decoration', label: 'Ë£Ö‰øÆÁª¥Êä§' },\r\n        { value: 'other', label: 'ÂÖ∂‰ªñÁª¥‰øÆ' }\r\n      ],\r\n      selectedType: null,\r\n      formData: {\r\n        room_id: '',\r\n        maintenance_type: '',\r\n        maintenance_date: '',\r\n        cost: '',\r\n        description: '',\r\n        maintenance_company: ''\r\n      }\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    this.loadRecords();\r\n    this.loadStatistics();\r\n    this.loadRoomOptions();\r\n  },\r\n  \r\n  onPullDownRefresh() {\r\n    this.refreshData();\r\n  },\r\n  \r\n  methods: {\r\n    // Âä†ËΩΩÁª¥‰øÆËÆ∞ÂΩï\r\n    async loadRecords(isRefresh = false) {\r\n      if (this.loading) return;\r\n      \r\n      this.loading = true;\r\n      \r\n      if (isRefresh) {\r\n        this.pageNum = 1;\r\n        this.recordList = [];\r\n        this.hasMore = true;\r\n      }\r\n      \r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getMaintenanceRecords',\r\n            data: {\r\n              pageNum: this.pageNum,\r\n              pageSize: this.pageSize,\r\n              searchKeyword: this.searchKeyword\r\n            }\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          const { list, total } = result.result.data;\r\n          \r\n          if (isRefresh) {\r\n            this.recordList = list;\r\n          } else {\r\n            this.recordList = [...this.recordList, ...list];\r\n          }\r\n          \r\n          this.hasMore = this.recordList.length < total;\r\n          this.pageNum++;\r\n        } else {\r\n          uni.showToast({\r\n            title: result.result.message,\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÁª¥‰øÆËÆ∞ÂΩïÂ§±Ë¥•:', error);\r\n        uni.showToast({\r\n          title: 'Âä†ËΩΩÂ§±Ë¥•',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n        uni.stopPullDownRefresh();\r\n      }\r\n    },\r\n    \r\n    // Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØ\r\n    async loadStatistics() {\r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getMaintenanceCostStats',\r\n            data: {}\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          const data = result.result.data;\r\n          this.statistics.totalRecords = data.recordCount;\r\n          this.statistics.totalCost = data.totalCost;\r\n          \r\n          // ËÆ°ÁÆóÊú¨ÊúàËÆ∞ÂΩïÊï∞\r\n          const thisMonth = new Date().getMonth() + 1;\r\n          const thisYear = new Date().getFullYear();\r\n          this.statistics.thisMonthRecords = data.records.filter(record => {\r\n            const recordDate = new Date(record.maintenance_date);\r\n            return recordDate.getMonth() + 1 === thisMonth && recordDate.getFullYear() === thisYear;\r\n          }).length;\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•:', error);\r\n      }\r\n    },\r\n    \r\n    // Âä†ËΩΩÊàøÈó¥ÈÄâÈ°π\r\n    async loadRoomOptions() {\r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getRooms',\r\n            data: {\r\n              pageSize: 1000,\r\n              pageNum: 1\r\n            }\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          this.roomOptions = result.result.data.list.map(room => ({\r\n            value: room._id,\r\n            label: `${room.room_number}Âè∑Êàø`\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error('Âä†ËΩΩÊàøÈó¥ÂàóË°®Â§±Ë¥•:', error);\r\n      }\r\n    },\r\n    \r\n    // ÊêúÁ¥¢\r\n    onSearch() {\r\n      clearTimeout(this.searchTimer);\r\n      this.searchTimer = setTimeout(() => {\r\n        this.refreshData();\r\n      }, 500);\r\n    },\r\n    \r\n    // Âà∑Êñ∞Êï∞ÊçÆ\r\n    refreshData() {\r\n      this.loadRecords(true);\r\n      this.loadStatistics();\r\n    },\r\n    \r\n    // Âä†ËΩΩÊõ¥Â§ö\r\n    loadMore() {\r\n      if (this.hasMore && !this.loading) {\r\n        this.loadRecords();\r\n      }\r\n    },\r\n    \r\n    // Êü•ÁúãËÆ∞ÂΩïËØ¶ÊÉÖ\r\n    viewRecord(record) {\r\n      // ÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µÈù¢ÊàñÊòæÁ§∫ËØ¶ÊÉÖÂºπÁ™ó\r\n      console.log('Êü•ÁúãÁª¥‰øÆËÆ∞ÂΩï:', record);\r\n    },\r\n    \r\n    // ÊòæÁ§∫Ê∑ªÂä†ÂºπÁ™ó\r\n    addRecord() {\r\n      this.showAddModal = true;\r\n      this.resetForm();\r\n    },\r\n    \r\n    // ÈöêËóèÊ∑ªÂä†ÂºπÁ™ó\r\n    hideAddModal() {\r\n      this.showAddModal = false;\r\n      this.resetForm();\r\n    },\r\n    \r\n    // ÈáçÁΩÆË°®Âçï\r\n    resetForm() {\r\n      this.formData = {\r\n        room_id: '',\r\n        maintenance_type: '',\r\n        maintenance_date: this.formatDateForPicker(new Date()),\r\n        cost: '',\r\n        description: '',\r\n        maintenance_company: ''\r\n      };\r\n      this.selectedRoom = null;\r\n      this.selectedType = null;\r\n    },\r\n    \r\n    // ÊàøÈó¥ÈÄâÊã©\r\n    onRoomChange(e) {\r\n      const index = e.detail.value;\r\n      this.selectedRoom = this.roomOptions[index];\r\n      this.formData.room_id = this.selectedRoom.value;\r\n    },\r\n    \r\n    // Á±ªÂûãÈÄâÊã©\r\n    onTypeChange(e) {\r\n      const index = e.detail.value;\r\n      this.selectedType = this.typeOptions[index];\r\n      this.formData.maintenance_type = this.selectedType.value;\r\n    },\r\n    \r\n    // Êó•ÊúüÈÄâÊã©\r\n    onDateChange(e) {\r\n      this.formData.maintenance_date = e.detail.value;\r\n    },\r\n    \r\n    // Êèê‰∫§ËÆ∞ÂΩï\r\n    async submitRecord() {\r\n      if (!this.validateForm()) return;\r\n      \r\n      uni.showLoading({ title: '‰øùÂ≠ò‰∏≠...' });\r\n      \r\n      try {\r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'addMaintenanceRecord',\r\n            data: this.formData\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          uni.showToast({\r\n            title: 'Ê∑ªÂä†ÊàêÂäü',\r\n            icon: 'success'\r\n          });\r\n          this.hideAddModal();\r\n          this.refreshData();\r\n        } else {\r\n          uni.showToast({\r\n            title: result.result.message,\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Ê∑ªÂä†Áª¥‰øÆËÆ∞ÂΩïÂ§±Ë¥•:', error);\r\n        uni.showToast({\r\n          title: '‰øùÂ≠òÂ§±Ë¥•',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        uni.hideLoading();\r\n      }\r\n    },\r\n    \r\n    // Ë°®ÂçïÈ™åËØÅ\r\n    validateForm() {\r\n      if (!this.formData.room_id) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ÈÄâÊã©ÊàøÈó¥',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      if (!this.formData.maintenance_type) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ÈÄâÊã©Áª¥‰øÆÁ±ªÂûã',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      if (!this.formData.maintenance_date) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ÈÄâÊã©Áª¥‰øÆÊó•Êúü',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      if (!this.formData.cost) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ËæìÂÖ•Áª¥‰øÆË¥πÁî®',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      if (!this.formData.description) {\r\n        uni.showToast({\r\n          title: 'ËØ∑ËæìÂÖ•Áª¥‰øÆÊèèËø∞',\r\n          icon: 'none'\r\n        });\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    },\r\n    \r\n    // Ê†ºÂºèÂåñÊó•Êúü\r\n    formatDate(date) {\r\n      if (!date) return '--';\r\n      const d = new Date(date);\r\n      const year = d.getFullYear();\r\n      const month = String(d.getMonth() + 1).padStart(2, '0');\r\n      const day = String(d.getDate()).padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    },\r\n    \r\n    // Ê†ºÂºèÂåñÊó•Êúü‰∏∫pickerÊ†ºÂºè\r\n    formatDateForPicker(date) {\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    },\r\n    \r\n    // Ëé∑ÂèñÁ±ªÂûãÊñáÊú¨\r\n    getTypeText(type) {\r\n      const typeMap = {\r\n        plumbing: 'Ê∞¥ÁÆ°',\r\n        electrical: 'ÁîµË∑Ø',\r\n        appliance: 'ÁîµÂô®',\r\n        furniture: 'ÂÆ∂ÂÖ∑',\r\n        decoration: 'Ë£Ö‰øÆ',\r\n        other: 'ÂÖ∂‰ªñ'\r\n      };\r\n      return typeMap[type] || 'Êú™Áü•';\r\n    },\r\n    \r\n    // Ëé∑ÂèñÁä∂ÊÄÅÊñáÊú¨\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        pending: 'ÂæÖÁª¥‰øÆ',\r\n        in_progress: 'Áª¥‰øÆ‰∏≠',\r\n        completed: 'Â∑≤ÂÆåÊàê',\r\n        warranty_expired: '‰øù‰øÆËøáÊúü'\r\n      };\r\n      return statusMap[status] || 'Êú™Áü•';\r\n    },\r\n    \r\n    // Ëé∑Âèñ‰øù‰øÆÊñáÊú¨\r\n    getWarrantyText(warrantyEndDate) {\r\n      if (!warrantyEndDate) return '';\r\n      \r\n      const end = new Date(warrantyEndDate);\r\n      const now = new Date();\r\n      const diffTime = end - now;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      \r\n      if (diffDays < 0) {\r\n        return '‰øù‰øÆÂ∑≤ËøáÊúü';\r\n      } else if (diffDays === 0) {\r\n        return '‰øù‰øÆ‰ªäÊó•Âà∞Êúü';\r\n      } else if (diffDays <= 30) {\r\n        return `‰øù‰øÆ${diffDays}Â§©ÂêéÂà∞Êúü`;\r\n      } else {\r\n        return `‰øù‰øÆ‰∏≠Ôºà${Math.floor(diffDays / 30)}‰∏™ÊúàÂêéÂà∞ÊúüÔºâ`;\r\n      }\r\n    },\r\n    \r\n    // Ëé∑Âèñ‰øù‰øÆÊ†∑ÂºèÁ±ª\r\n    getWarrantyClass(warrantyEndDate) {\r\n      if (!warrantyEndDate) return '';\r\n      \r\n      const end = new Date(warrantyEndDate);\r\n      const now = new Date();\r\n      const diffTime = end - now;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      \r\n      if (diffDays < 0) {\r\n        return 'expired';\r\n      } else if (diffDays <= 7) {\r\n        return 'urgent';\r\n      } else if (diffDays <= 30) {\r\n        return 'warning';\r\n      } else {\r\n        return 'normal';\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* Êìç‰ΩúÊ†è */\r\n.action-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20rpx 32rpx;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.search-box {\r\n  flex: 1;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 16rpx 20rpx;\r\n  background-color: #f8f9fa;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n  border: none;\r\n}\r\n\r\n.add-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16rpx 24rpx;\r\n  background-color: #007AFF;\r\n  color: white;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.add-icon {\r\n  font-size: 32rpx;\r\n  margin-right: 8rpx;\r\n}\r\n\r\n/* ÁªüËÆ°Âç°Áâá */\r\n.stats-row {\r\n  display: flex;\r\n  padding: 20rpx 32rpx;\r\n  gap: 20rpx;\r\n}\r\n\r\n.stat-card {\r\n  flex: 1;\r\n  background-color: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  text-align: center;\r\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.stat-number {\r\n  display: block;\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #007AFF;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.stat-number.cost {\r\n  color: #ff4d4f;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n/* ËÆ∞ÂΩïÂàóË°® */\r\n.record-list {\r\n  flex: 1;\r\n  padding: 0 32rpx 20rpx;\r\n}\r\n\r\n.record-item {\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.record-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.room-info {\r\n  flex: 1;\r\n}\r\n\r\n.room-number {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.record-type {\r\n  display: inline-block;\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 22rpx;\r\n  color: white;\r\n}\r\n\r\n.type-plumbing { background-color: #1890ff; }\r\n.type-electrical { background-color: #faad14; }\r\n.type-appliance { background-color: #52c41a; }\r\n.type-furniture { background-color: #722ed1; }\r\n.type-decoration { background-color: #eb2f96; }\r\n.type-other { background-color: #8c8c8c; }\r\n\r\n.record-cost {\r\n  text-align: right;\r\n}\r\n\r\n.cost-amount {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #ff4d4f;\r\n}\r\n\r\n.record-content {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.record-desc {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  line-height: 1.5;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.record-meta {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.record-status {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.status-badge {\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 22rpx;\r\n  color: white;\r\n}\r\n\r\n.status-pending { background-color: #faad14; }\r\n.status-in_progress { background-color: #1890ff; }\r\n.status-completed { background-color: #52c41a; }\r\n.status-warranty_expired { background-color: #8c8c8c; }\r\n\r\n.warranty-info {\r\n  font-size: 22rpx;\r\n}\r\n\r\n.warranty-text.normal { color: #52c41a; }\r\n.warranty-text.warning { color: #faad14; }\r\n.warranty-text.urgent { color: #ff4d4f; }\r\n.warranty-text.expired { color: #8c8c8c; }\r\n\r\n.load-more {\r\n  text-align: center;\r\n  padding: 40rpx;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n/* ÂºπÁ™óÊ†∑Âºè */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0,0,0,0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  width: 90%;\r\n  max-height: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 32rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.modal-close {\r\n  font-size: 32rpx;\r\n  color: #999;\r\n  padding: 8rpx;\r\n}\r\n\r\n.modal-body {\r\n  flex: 1;\r\n  padding: 32rpx;\r\n  overflow-y: auto;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-picker {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  background-color: #f8f9fa;\r\n  border-radius: 12rpx;\r\n  border: 2rpx solid #e9ecef;\r\n}\r\n\r\n.picker-text {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n\r\n.picker-arrow {\r\n  font-size: 24rpx;\r\n  opacity: 0.6;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  padding: 20rpx;\r\n  background-color: #f8f9fa;\r\n  border-radius: 12rpx;\r\n  border: 2rpx solid #e9ecef;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.form-textarea {\r\n  width: 100%;\r\n  height: 120rpx;\r\n  padding: 20rpx;\r\n  background-color: #f8f9fa;\r\n  border-radius: 12rpx;\r\n  border: 2rpx solid #e9ecef;\r\n  font-size: 28rpx;\r\n  resize: none;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  gap: 20rpx;\r\n  padding: 32rpx;\r\n  border-top: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.btn {\r\n  flex: 1;\r\n  padding: 24rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  border: none;\r\n  text-align: center;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n}\r\n\r\n.confirm-btn {\r\n  background: linear-gradient(135deg, #007AFF 0%, #40a9ff 100%);\r\n  color: white;\r\n}\r\n</style>","import MiniProgramPage from '/Users/peakom/Documents/room-list/pages/maintenance-record/maintenance-record.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AA4JA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY,CAAE;AAAA,MACd,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACT,UAAU;AAAA,MACV,eAAe;AAAA,MACf,aAAa;AAAA,MACb,YAAY;AAAA,QACV,cAAc;AAAA,QACd,WAAW;AAAA,QACX,kBAAkB;AAAA,MACnB;AAAA,MACD,cAAc;AAAA,MACd,aAAa,CAAE;AAAA,MACf,cAAc;AAAA,MACd,aAAa;AAAA,QACX,EAAE,OAAO,YAAY,OAAO,OAAQ;AAAA,QACpC,EAAE,OAAO,cAAc,OAAO,OAAQ;AAAA,QACtC,EAAE,OAAO,aAAa,OAAO,OAAQ;AAAA,QACrC,EAAE,OAAO,aAAa,OAAO,OAAQ;AAAA,QACrC,EAAE,OAAO,cAAc,OAAO,OAAQ;AAAA,QACtC,EAAE,OAAO,SAAS,OAAO,OAAO;AAAA,MACjC;AAAA,MACD,cAAc;AAAA,MACd,UAAU;AAAA,QACR,SAAS;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,MAAM;AAAA,QACN,aAAa;AAAA,QACb,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,YAAW;AAChB,SAAK,eAAc;AACnB,SAAK,gBAAe;AAAA,EACrB;AAAA,EAED,oBAAoB;AAClB,SAAK,YAAW;AAAA,EACjB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,MAAM,YAAY,YAAY,OAAO;AACnC,UAAI,KAAK;AAAS;AAElB,WAAK,UAAU;AAEf,UAAI,WAAW;AACb,aAAK,UAAU;AACf,aAAK,aAAa;AAClB,aAAK,UAAU;AAAA,MACjB;AAEA,UAAI;AACF,cAAM,SAAS,MAAMA,cAAQ,GAAC,aAAa;AAAA,UACzC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,QAAQ;AAAA,YACR,MAAM;AAAA,cACJ,SAAS,KAAK;AAAA,cACd,UAAU,KAAK;AAAA,cACf,eAAe,KAAK;AAAA,YACtB;AAAA,UACF;AAAA,QACF,CAAC;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC5B,gBAAM,EAAE,MAAM,UAAU,OAAO,OAAO;AAEtC,cAAI,WAAW;AACb,iBAAK,aAAa;AAAA,iBACb;AACL,iBAAK,aAAa,CAAC,GAAG,KAAK,YAAY,GAAG,IAAI;AAAA,UAChD;AAEA,eAAK,UAAU,KAAK,WAAW,SAAS;AACxC,eAAK;AAAA,eACA;AACLC,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,OAAO,OAAO;AAAA,YACrB,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,0DAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AACfA,sBAAG,MAAC,oBAAmB;AAAA,MACzB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,iBAAiB;AACrB,UAAI;AACF,cAAM,SAAS,MAAMD,cAAQ,GAAC,aAAa;AAAA,UACzC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,QAAQ;AAAA,YACR,MAAM,CAAC;AAAA,UACT;AAAA,QACF,CAAC;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC5B,gBAAM,OAAO,OAAO,OAAO;AAC3B,eAAK,WAAW,eAAe,KAAK;AACpC,eAAK,WAAW,YAAY,KAAK;AAGjC,gBAAM,aAAY,oBAAI,KAAM,GAAC,SAAQ,IAAK;AAC1C,gBAAM,YAAW,oBAAI,KAAM,GAAC,YAAW;AACvC,eAAK,WAAW,mBAAmB,KAAK,QAAQ,OAAO,YAAU;AAC/D,kBAAM,aAAa,IAAI,KAAK,OAAO,gBAAgB;AACnD,mBAAO,WAAW,SAAQ,IAAK,MAAM,aAAa,WAAW,kBAAkB;AAAA,UAChF,CAAA,EAAE;AAAA,QACL;AAAA,MACA,SAAO,OAAO;AACdC,sBAAA,MAAA,MAAA,SAAA,0DAAc,aAAa,KAAK;AAAA,MAClC;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,kBAAkB;AACtB,UAAI;AACF,cAAM,SAAS,MAAMD,cAAQ,GAAC,aAAa;AAAA,UACzC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,QAAQ;AAAA,YACR,MAAM;AAAA,cACJ,UAAU;AAAA,cACV,SAAS;AAAA,YACX;AAAA,UACF;AAAA,QACF,CAAC;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC5B,eAAK,cAAc,OAAO,OAAO,KAAK,KAAK,IAAI,WAAS;AAAA,YACtD,OAAO,KAAK;AAAA,YACZ,OAAO,GAAG,KAAK,WAAW;AAAA,UAC3B,EAAC;AAAA,QACJ;AAAA,MACA,SAAO,OAAO;AACdC,sBAAA,MAAA,MAAA,SAAA,0DAAc,aAAa,KAAK;AAAA,MAClC;AAAA,IACD;AAAA;AAAA,IAGD,WAAW;AACT,mBAAa,KAAK,WAAW;AAC7B,WAAK,cAAc,WAAW,MAAM;AAClC,aAAK,YAAW;AAAA,MACjB,GAAE,GAAG;AAAA,IACP;AAAA;AAAA,IAGD,cAAc;AACZ,WAAK,YAAY,IAAI;AACrB,WAAK,eAAc;AAAA,IACpB;AAAA;AAAA,IAGD,WAAW;AACT,UAAI,KAAK,WAAW,CAAC,KAAK,SAAS;AACjC,aAAK,YAAW;AAAA,MAClB;AAAA,IACD;AAAA;AAAA,IAGD,WAAW,QAAQ;AAEjBA,iGAAY,WAAW,MAAM;AAAA,IAC9B;AAAA;AAAA,IAGD,YAAY;AACV,WAAK,eAAe;AACpB,WAAK,UAAS;AAAA,IACf;AAAA;AAAA,IAGD,eAAe;AACb,WAAK,eAAe;AACpB,WAAK,UAAS;AAAA,IACf;AAAA;AAAA,IAGD,YAAY;AACV,WAAK,WAAW;AAAA,QACd,SAAS;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB,KAAK,oBAAoB,oBAAI,KAAI,CAAE;AAAA,QACrD,MAAM;AAAA,QACN,aAAa;AAAA,QACb,qBAAqB;AAAA;AAEvB,WAAK,eAAe;AACpB,WAAK,eAAe;AAAA,IACrB;AAAA;AAAA,IAGD,aAAa,GAAG;AACd,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,eAAe,KAAK,YAAY,KAAK;AAC1C,WAAK,SAAS,UAAU,KAAK,aAAa;AAAA,IAC3C;AAAA;AAAA,IAGD,aAAa,GAAG;AACd,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,eAAe,KAAK,YAAY,KAAK;AAC1C,WAAK,SAAS,mBAAmB,KAAK,aAAa;AAAA,IACpD;AAAA;AAAA,IAGD,aAAa,GAAG;AACd,WAAK,SAAS,mBAAmB,EAAE,OAAO;AAAA,IAC3C;AAAA;AAAA,IAGD,MAAM,eAAe;AACnB,UAAI,CAAC,KAAK,aAAY;AAAI;AAE1BA,oBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnC,UAAI;AACF,cAAM,SAAS,MAAMD,cAAQ,GAAC,aAAa;AAAA,UACzC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,QAAQ;AAAA,YACR,MAAM,KAAK;AAAA,UACb;AAAA,QACF,CAAC;AAED,YAAI,OAAO,OAAO,SAAS,GAAG;AAC5BC,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACD,eAAK,aAAY;AACjB,eAAK,YAAW;AAAA,eACX;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,OAAO,OAAO;AAAA,YACrB,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,0DAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACRA,sBAAG,MAAC,YAAW;AAAA,MACjB;AAAA,IACD;AAAA;AAAA,IAGD,eAAe;AACb,UAAI,CAAC,KAAK,SAAS,SAAS;AAC1BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,SAAS,kBAAkB;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,SAAS,kBAAkB;AACnCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,SAAS,MAAM;AACvBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,eAAO;AAAA,MACT;AAEA,UAAI,CAAC,KAAK,SAAS,aAAa;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,eAAO;AAAA,MACT;AAEA,aAAO;AAAA,IACR;AAAA;AAAA,IAGD,WAAW,MAAM;AACf,UAAI,CAAC;AAAM,eAAO;AAClB,YAAM,IAAI,IAAI,KAAK,IAAI;AACvB,YAAM,OAAO,EAAE;AACf,YAAM,QAAQ,OAAO,EAAE,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACtD,YAAM,MAAM,OAAO,EAAE,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAC/C,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC/B;AAAA;AAAA,IAGD,oBAAoB,MAAM;AACxB,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC/B;AAAA;AAAA,IAGD,YAAY,MAAM;AAChB,YAAM,UAAU;AAAA,QACd,UAAU;AAAA,QACV,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,WAAW;AAAA,QACX,YAAY;AAAA,QACZ,OAAO;AAAA;AAET,aAAO,QAAQ,IAAI,KAAK;AAAA,IACzB;AAAA;AAAA,IAGD,cAAc,QAAQ;AACpB,YAAM,YAAY;AAAA,QAChB,SAAS;AAAA,QACT,aAAa;AAAA,QACb,WAAW;AAAA,QACX,kBAAkB;AAAA;AAEpB,aAAO,UAAU,MAAM,KAAK;AAAA,IAC7B;AAAA;AAAA,IAGD,gBAAgB,iBAAiB;AAC/B,UAAI,CAAC;AAAiB,eAAO;AAE7B,YAAM,MAAM,IAAI,KAAK,eAAe;AACpC,YAAM,MAAM,oBAAI;AAChB,YAAM,WAAW,MAAM;AACvB,YAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAE3D,UAAI,WAAW,GAAG;AAChB,eAAO;AAAA,MACT,WAAW,aAAa,GAAG;AACzB,eAAO;AAAA,MACT,WAAW,YAAY,IAAI;AACzB,eAAO,KAAK,QAAQ;AAAA,aACf;AACL,eAAO,OAAO,KAAK,MAAM,WAAW,EAAE,CAAC;AAAA,MACzC;AAAA,IACD;AAAA;AAAA,IAGD,iBAAiB,iBAAiB;AAChC,UAAI,CAAC;AAAiB,eAAO;AAE7B,YAAM,MAAM,IAAI,KAAK,eAAe;AACpC,YAAM,MAAM,oBAAI;AAChB,YAAM,WAAW,MAAM;AACvB,YAAM,WAAW,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AAE3D,UAAI,WAAW,GAAG;AAChB,eAAO;AAAA,MACT,WAAW,YAAY,GAAG;AACxB,eAAO;AAAA,MACT,WAAW,YAAY,IAAI;AACzB,eAAO;AAAA,aACF;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtiBA,GAAG,WAAW,eAAe;"}