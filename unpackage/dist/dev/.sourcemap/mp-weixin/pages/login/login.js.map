{"version":3,"file":"login.js","sources":["pages/login/login.vue","pages/login/login.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <view class=\"login-card\">\r\n      <!-- Â§¥ÈÉ®LogoÂíåÊ†áÈ¢ò -->\r\n      <view class=\"login-header\">\r\n        <view class=\"logo-section\">\r\n          <text class=\"logo-icon\">üè†</text>\r\n          <text class=\"app-title\">ÊàøÈó¥ÁÆ°ÁêÜÁ≥ªÁªü</text>\r\n        </view>\r\n        <text class=\"login-subtitle\">ËØ∑ÁôªÂΩï‰ª•ËÆøÈóÆÁ≥ªÁªü</text>\r\n      </view>\r\n\r\n      <!-- ÁôªÂΩïË°®Âçï -->\r\n      <view class=\"login-form\">\r\n        <view class=\"form-item\">\r\n          <view class=\"input-wrapper\">\r\n            <text class=\"input-icon\">üë§</text>\r\n            <input \r\n              class=\"form-input\" \r\n              type=\"text\" \r\n              v-model=\"loginForm.username\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•Áî®Êà∑Âêç\"\r\n              @input=\"clearError\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"form-item\">\r\n          <view class=\"input-wrapper\">\r\n            <text class=\"input-icon\">üîí</text>\r\n            <input \r\n              class=\"form-input\" \r\n              type=\"password\" \r\n              v-model=\"loginForm.password\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•ÂØÜÁ†Å\"\r\n              @input=\"clearError\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <!-- ÈîôËØØÊèêÁ§∫ -->\r\n        <view class=\"error-message\" v-if=\"errorMessage\">\r\n          <text class=\"error-text\">{{ errorMessage }}</text>\r\n        </view>\r\n\r\n        <!-- ÁôªÂΩïÊåâÈíÆ -->\r\n        <button \r\n          class=\"login-btn\" \r\n          :class=\"{ loading: isLoading }\"\r\n          @click=\"handleLogin\"\r\n          :disabled=\"isLoading\"\r\n        >\r\n          <text v-if=\"!isLoading\">ÁôªÂΩï</text>\r\n          <text v-else>ÁôªÂΩï‰∏≠...</text>\r\n        </button>\r\n\r\n        <!-- ÊèêÁ§∫‰ø°ÊÅØ -->\r\n        <view class=\"login-tips\">\r\n          <text class=\"tips-text\">ÈªòËÆ§Ë¥¶Âè∑: admin / 123456</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ÁâàÊùÉ‰ø°ÊÅØ -->\r\n    <view class=\"copyright\">\r\n      <text class=\"copyright-text\">ÊàøÈó¥ÁÆ°ÁêÜÁ≥ªÁªü v1.0</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      loginForm: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      errorMessage: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n\r\n  onLoad() {\r\n    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÁôªÂΩï\r\n    this.checkLoginStatus();\r\n  },\r\n\r\n  methods: {\r\n    // Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\r\n    checkLoginStatus() {\r\n      const userInfo = uni.getStorageSync('userInfo');\r\n      const token = uni.getStorageSync('authToken');\r\n      \r\n      if (userInfo && token) {\r\n        // Â∑≤ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞‰∏ªÈ°µ\r\n        uni.reLaunch({\r\n          url: '/pages/room-list/room-list'\r\n        });\r\n      }\r\n    },\r\n\r\n    // Ê∏ÖÈô§ÈîôËØØ‰ø°ÊÅØ\r\n    clearError() {\r\n      this.errorMessage = '';\r\n    },\r\n\r\n    // Â§ÑÁêÜÁôªÂΩï\r\n    async handleLogin() {\r\n      // Ë°®ÂçïÈ™åËØÅ\r\n      if (!this.loginForm.username.trim()) {\r\n        this.errorMessage = 'ËØ∑ËæìÂÖ•Áî®Êà∑Âêç';\r\n        return;\r\n      }\r\n\r\n      if (!this.loginForm.password.trim()) {\r\n        this.errorMessage = 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å';\r\n        return;\r\n      }\r\n\r\n      this.isLoading = true;\r\n      this.errorMessage = '';\r\n\r\n      try {\r\n        // Ë∞ÉÁî®ÁôªÂΩïÈ™åËØÅ\r\n        const result = await this.validateLogin(this.loginForm.username, this.loginForm.password);\r\n        \r\n        if (result.success) {\r\n          // ÁôªÂΩïÊàêÂäü\r\n          await this.handleLoginSuccess(result.userInfo);\r\n        } else {\r\n          this.errorMessage = result.message || 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Áî®Êà∑ÂêçÂíåÂØÜÁ†Å';\r\n        }\r\n      } catch (error) {\r\n        console.error('ÁôªÂΩïÂ§±Ë¥•:', error);\r\n        this.errorMessage = 'ÁôªÂΩïËøáÁ®ã‰∏≠ÂèëÁîüÈîôËØØÔºåËØ∑ÈáçËØï';\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    // È™åËØÅÁôªÂΩï\r\n    async validateLogin(username, password) {\r\n      // ËøôÈáåÂèØ‰ª•Êé•ÂÖ•ÁúüÂÆûÁöÑËÆ§ËØÅÁ≥ªÁªü\r\n      // ÁõÆÂâç‰ΩøÁî®ÁÆÄÂçïÁöÑÊú¨Âú∞È™åËØÅ\r\n      const validAccounts = [\r\n        { username: 'admin', password: '123456', name: 'ÁÆ°ÁêÜÂëò', role: 'admin' },\r\n        { username: 'manager', password: '888888', name: 'ÊàøÁÆ°Âëò', role: 'manager' }\r\n      ];\r\n\r\n      const account = validAccounts.find(acc => \r\n        acc.username === username && acc.password === password\r\n      );\r\n\r\n      if (account) {\r\n        return {\r\n          success: true,\r\n          userInfo: {\r\n            username: account.username,\r\n            name: account.name,\r\n            role: account.role,\r\n            loginTime: new Date().toISOString()\r\n          }\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: 'Áî®Êà∑ÂêçÊàñÂØÜÁ†ÅÈîôËØØ'\r\n        };\r\n      }\r\n    },\r\n\r\n    // Â§ÑÁêÜÁôªÂΩïÊàêÂäü\r\n    async handleLoginSuccess(userInfo) {\r\n      try {\r\n        // ÁîüÊàêtoken\r\n        const token = this.generateToken(userInfo);\r\n        \r\n        // ‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØÂíåtoken\r\n        uni.setStorageSync('userInfo', userInfo);\r\n        uni.setStorageSync('authToken', token);\r\n        \r\n        // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫\r\n        uni.showToast({\r\n          title: 'ÁôªÂΩïÊàêÂäü',\r\n          icon: 'success',\r\n          duration: 1500\r\n        });\r\n\r\n        // Âª∂ËøüË∑≥ËΩ¨ÔºåËÆ©Áî®Êà∑ÁúãÂà∞ÊàêÂäüÊèêÁ§∫\r\n        setTimeout(() => {\r\n          uni.reLaunch({\r\n            url: '/pages/room-list/room-list'\r\n          });\r\n        }, 1500);\r\n\r\n      } catch (error) {\r\n        console.error('‰øùÂ≠òÁôªÂΩï‰ø°ÊÅØÂ§±Ë¥•:', error);\r\n        this.errorMessage = 'ÁôªÂΩï‰ø°ÊÅØ‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï';\r\n      }\r\n    },\r\n\r\n    // ÁîüÊàêÁÆÄÂçïÁöÑtoken\r\n    generateToken(userInfo) {\r\n      const timestamp = Date.now();\r\n      const randomStr = Math.random().toString(36).substring(2);\r\n      return `${userInfo.username}_${timestamp}_${randomStr}`;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40rpx;\r\n}\r\n\r\n.login-card {\r\n  width: 100%;\r\n  max-width: 600rpx;\r\n  background: white;\r\n  border-radius: 24rpx;\r\n  padding: 60rpx 40rpx;\r\n  box-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.login-header {\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n}\r\n\r\n.logo-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.logo-icon {\r\n  font-size: 64rpx;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.app-title {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.login-subtitle {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.login-form {\r\n  width: 100%;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.input-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f8f9fa;\r\n  border-radius: 12rpx;\r\n  padding: 0 20rpx;\r\n  border: 2rpx solid transparent;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.input-wrapper:focus-within {\r\n  border-color: #667eea;\r\n  background: white;\r\n  box-shadow: 0 0 0 4rpx rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.input-icon {\r\n  font-size: 32rpx;\r\n  margin-right: 16rpx;\r\n  color: #999;\r\n}\r\n\r\n.form-input {\r\n  flex: 1;\r\n  height: 88rpx;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  background: transparent;\r\n  border: none;\r\n}\r\n\r\n.form-input::placeholder {\r\n  color: #999;\r\n}\r\n\r\n.error-message {\r\n  margin-bottom: 24rpx;\r\n  padding: 16rpx 20rpx;\r\n  background: #ffeaea;\r\n  border-radius: 8rpx;\r\n  border-left: 6rpx solid #ff4757;\r\n}\r\n\r\n.error-text {\r\n  font-size: 26rpx;\r\n  color: #ff4757;\r\n}\r\n\r\n.login-btn {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 12rpx;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s;\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.login-btn:not([disabled]):active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.login-btn.loading {\r\n  opacity: 0.8;\r\n}\r\n\r\n.login-btn[disabled] {\r\n  opacity: 0.6;\r\n}\r\n\r\n.login-tips {\r\n  text-align: center;\r\n  padding: 20rpx;\r\n  background: #f0f7ff;\r\n  border-radius: 8rpx;\r\n  border: 1rpx solid #e1f0ff;\r\n}\r\n\r\n.tips-text {\r\n  font-size: 24rpx;\r\n  color: #1890ff;\r\n}\r\n\r\n.copyright {\r\n  margin-top: 60rpx;\r\n  text-align: center;\r\n}\r\n\r\n.copyright-text {\r\n  font-size: 24rpx;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n</style>","import MiniProgramPage from '/Users/peakom/Documents/room-list/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAuEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAAA,MACD,cAAc;AAAA,MACd,WAAW;AAAA,IACb;AAAA,EACD;AAAA,EAED,SAAS;AAEP,SAAK,iBAAgB;AAAA,EACtB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,mBAAmB;AACjB,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,YAAM,QAAQA,cAAAA,MAAI,eAAe,WAAW;AAE5C,UAAI,YAAY,OAAO;AAErBA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,QACP,CAAC;AAAA,MACH;AAAA,IACD;AAAA;AAAA,IAGD,aAAa;AACX,WAAK,eAAe;AAAA,IACrB;AAAA;AAAA,IAGD,MAAM,cAAc;AAElB,UAAI,CAAC,KAAK,UAAU,SAAS,KAAI,GAAI;AACnC,aAAK,eAAe;AACpB;AAAA,MACF;AAEA,UAAI,CAAC,KAAK,UAAU,SAAS,KAAI,GAAI;AACnC,aAAK,eAAe;AACpB;AAAA,MACF;AAEA,WAAK,YAAY;AACjB,WAAK,eAAe;AAEpB,UAAI;AAEF,cAAM,SAAS,MAAM,KAAK,cAAc,KAAK,UAAU,UAAU,KAAK,UAAU,QAAQ;AAExF,YAAI,OAAO,SAAS;AAElB,gBAAM,KAAK,mBAAmB,OAAO,QAAQ;AAAA,eACxC;AACL,eAAK,eAAe,OAAO,WAAW;AAAA,QACxC;AAAA,MACA,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,gCAAc,SAAS,KAAK;AAC5B,aAAK,eAAe;AAAA,MACtB,UAAU;AACR,aAAK,YAAY;AAAA,MACnB;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,cAAc,UAAU,UAAU;AAGtC,YAAM,gBAAgB;AAAA,QACpB,EAAE,UAAU,SAAS,UAAU,UAAU,MAAM,OAAO,MAAM,QAAS;AAAA,QACrE,EAAE,UAAU,WAAW,UAAU,UAAU,MAAM,OAAO,MAAM,UAAU;AAAA;AAG1E,YAAM,UAAU,cAAc;AAAA,QAAK,SACjC,IAAI,aAAa,YAAY,IAAI,aAAa;AAAA;AAGhD,UAAI,SAAS;AACX,eAAO;AAAA,UACL,SAAS;AAAA,UACT,UAAU;AAAA,YACR,UAAU,QAAQ;AAAA,YAClB,MAAM,QAAQ;AAAA,YACd,MAAM,QAAQ;AAAA,YACd,YAAW,oBAAI,KAAM,GAAC,YAAY;AAAA,UACpC;AAAA;aAEG;AACL,eAAO;AAAA,UACL,SAAS;AAAA,UACT,SAAS;AAAA;MAEb;AAAA,IACD;AAAA;AAAA,IAGD,MAAM,mBAAmB,UAAU;AACjC,UAAI;AAEF,cAAM,QAAQ,KAAK,cAAc,QAAQ;AAGzCA,sBAAAA,MAAI,eAAe,YAAY,QAAQ;AACvCA,sBAAAA,MAAI,eAAe,aAAa,KAAK;AAGrCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AAGD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,SAAS;AAAA,YACX,KAAK;AAAA,UACP,CAAC;AAAA,QACF,GAAE,IAAI;AAAA,MAEP,SAAO,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,gCAAc,aAAa,KAAK;AAChC,aAAK,eAAe;AAAA,MACtB;AAAA,IACD;AAAA;AAAA,IAGD,cAAc,UAAU;AACtB,YAAM,YAAY,KAAK;AACvB,YAAM,YAAY,KAAK,OAAQ,EAAC,SAAS,EAAE,EAAE,UAAU,CAAC;AACxD,aAAO,GAAG,SAAS,QAAQ,IAAI,SAAS,IAAI,SAAS;AAAA,IACvD;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;AChNA,GAAG,WAAW,eAAe;"}