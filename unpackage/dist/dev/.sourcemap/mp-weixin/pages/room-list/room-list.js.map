{"version":3,"file":"room-list.js","sources":["pages/room-list/room-list.vue","pages/room-list/room-list.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- Tab栏 -->\r\n    <view class=\"tab-bar\">\r\n      <view \r\n        class=\"tab-item\" \r\n        :class=\"{ active: currentTab === 'all' }\"\r\n        @click=\"switchTab('all')\"\r\n      >\r\n        <view class=\"tab-content\">\r\n          <text class=\"tab-text\">全部</text>\r\n          <text class=\"tab-count\">({{ statistics.total }})</text>\r\n        </view>\r\n      </view>\r\n      <view \r\n        class=\"tab-item\" \r\n        :class=\"{ active: currentTab === 'available' }\"\r\n        @click=\"switchTab('available')\"\r\n      >\r\n        <view class=\"tab-content\">\r\n          <text class=\"tab-text\">可租用</text>\r\n          <text class=\"tab-count\">({{ statistics.available }})</text>\r\n        </view>\r\n      </view>\r\n      <view \r\n        class=\"tab-item\" \r\n        :class=\"{ active: currentTab === 'rented' }\"\r\n        @click=\"switchTab('rented')\"\r\n      >\r\n        <view class=\"tab-content\">\r\n          <text class=\"tab-text\">已租用</text>\r\n          <text class=\"tab-count\">({{ statistics.rented }})</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 操作栏 -->\r\n    <view class=\"action-bar\">\r\n      <view class=\"search-box\">\r\n        <input \r\n          class=\"search-input\" \r\n          v-model=\"searchKeyword\" \r\n          placeholder=\"搜索房间号...\"\r\n          @input=\"onSearch\"\r\n        />\r\n      </view>\r\n      <view class=\"add-btn\" @click=\"addRoom\">\r\n        <text class=\"add-icon\">+</text>\r\n        <text>添加</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 房间列表 -->\r\n    <scroll-view class=\"room-list\" scroll-y=\"true\" @scrolltolower=\"loadMore\">\r\n      <view class=\"room-item\" v-for=\"room in roomList\" :key=\"room._id\" @click=\"viewRoom(room)\">\r\n        <view class=\"room-header\">\r\n          <view class=\"room-number\">{{ room.room_number }}号房</view>\r\n          <view class=\"header-actions\">\r\n            <button class=\"header-btn tenant\" @click.stop=\"createRental(room)\" v-if=\"room.status === 'available'\">\r\n              出租\r\n            </button>\r\n            <button class=\"header-btn renewal\" @click.stop=\"renewRental(room)\" v-if=\"room.status === 'rented'\">\r\n              续租\r\n            </button>\r\n            <button class=\"header-btn terminate\" @click.stop=\"terminateRental(room)\" v-if=\"room.status === 'rented'\">\r\n              退租\r\n            </button>\r\n          </view>\r\n        </view>\r\n        \r\n        \r\n        <view class=\"tenant-info-card\" v-if=\"room.current_tenant\">\r\n          <view class=\"tenant-main-info\">\r\n            <view class=\"tenant-name-phone\">\r\n              <text class=\"tenant-name\">{{ room.current_tenant.name }}</text>\r\n              <text class=\"tenant-phone\" @tap=\"callTenant(room.current_tenant.phone)\">\r\n                📞 {{ room.current_tenant.phone }}\r\n              </text>\r\n            </view>\r\n            <view class=\"tenant-status\">\r\n              <text class=\"status-badge\">在租</text>\r\n            </view>\r\n          </view>\r\n          <view class=\"rental-period\" v-if=\"room.current_rental\">\r\n            <text class=\"period-text\">📅 {{ formatDateRange(room.current_rental.rent_start_date, room.current_rental.rent_end_date) }}</text>\r\n            <view class=\"days-remaining\" :class=\"getDaysRemainingClass(room.current_rental.rent_end_date)\">\r\n              <text class=\"days-text\">{{ getDaysRemaining(room.current_rental.rent_end_date) }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 加载更多 -->\r\n      <view class=\"load-more\" v-if=\"hasMore\">\r\n        <text>{{ loading ? '加载中...' : '上拉加载更多' }}</text>\r\n      </view>\r\n    </scroll-view>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      roomList: [],\r\n      loading: false,\r\n      hasMore: true,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      currentTab: 'all', // 当前选中的Tab\r\n      searchKeyword: '', // 搜索关键词\r\n      searchTimer: null, // 搜索防抖定时器\r\n      statistics: {\r\n        total: 0,\r\n        rented: 0,\r\n        available: 0\r\n      }\r\n    }\r\n  },\r\n  \r\n  onLoad() {\r\n    this.loadRooms();\r\n    this.loadStatistics();\r\n  },\r\n  \r\n  onPullDownRefresh() {\r\n    this.refreshData();\r\n  },\r\n  \r\n  onShow() {\r\n    // 页面显示时刷新数据，确保从其他页面返回时数据是最新的\r\n    this.refreshData();\r\n  },\r\n  \r\n  methods: {\r\n    // 加载房间列表\r\n    async loadRooms(isRefresh = false) {\r\n      if (this.loading) return;\r\n      \r\n      this.loading = true;\r\n      \r\n      if (isRefresh) {\r\n        this.pageNum = 1;\r\n        this.roomList = [];\r\n        this.hasMore = true;\r\n      }\r\n      \r\n      try {\r\n        // 构建请求数据\r\n        const requestData = {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          searchKeyword: this.searchKeyword\r\n        };\r\n        \r\n        // 只有不是\"全部\"时才传递status参数\r\n        if (this.currentTab !== 'all') {\r\n          requestData.status = this.currentTab;\r\n        }\r\n        \r\n        const result = await uniCloud.callFunction({\r\n          name: 'room-management',\r\n          data: {\r\n            action: 'getRooms',\r\n            data: requestData\r\n          }\r\n        });\r\n        \r\n        if (result.result.code === 0) {\r\n          const { list, total } = result.result.data;\r\n          \r\n          if (isRefresh) {\r\n            this.roomList = list;\r\n          } else {\r\n            this.roomList = [...this.roomList, ...list];\r\n          }\r\n          \r\n          this.hasMore = this.roomList.length < total;\r\n          this.pageNum++;\r\n        } else {\r\n          uni.showToast({\r\n            title: result.result.message,\r\n            icon: 'none'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('加载房间列表失败:', error);\r\n        uni.showToast({\r\n          title: '加载失败',\r\n          icon: 'none'\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n        uni.stopPullDownRefresh();\r\n      }\r\n    },\r\n    \r\n    // 加载统计信息\r\n    async loadStatistics() {\r\n      try {\r\n        const promises = [\r\n          this.getRoomCount(''),\r\n          this.getRoomCount('rented'),\r\n          this.getRoomCount('available')\r\n        ];\r\n        \r\n        const results = await Promise.all(promises);\r\n        \r\n        this.statistics = {\r\n          total: results[0],\r\n          rented: results[1],\r\n          available: results[2]\r\n        };\r\n      } catch (error) {\r\n        console.error('加载统计信息失败:', error);\r\n      }\r\n    },\r\n    \r\n    // 获取房间数量\r\n    async getRoomCount(status) {\r\n      const requestData = {\r\n        pageSize: 1, // 只需要获取总数，不需要具体数据\r\n        pageNum: 1\r\n      };\r\n      \r\n      // 只有status不为空时才传递status参数\r\n      if (status) {\r\n        requestData.status = status;\r\n      }\r\n      \r\n      const result = await uniCloud.callFunction({\r\n        name: 'room-management',\r\n        data: {\r\n          action: 'getRooms',\r\n          data: requestData\r\n        }\r\n      });\r\n      \r\n      return result.result.code === 0 ? result.result.data.total : 0;\r\n    },\r\n    \r\n    \r\n    // 搜索\r\n    onSearch(e) {\r\n      this.searchKeyword = e.detail.value;\r\n      // 防抖处理\r\n      clearTimeout(this.searchTimer);\r\n      this.searchTimer = setTimeout(() => {\r\n        this.refreshData();\r\n      }, 500);\r\n    },\r\n    \r\n    // 刷新数据\r\n    refreshData() {\r\n      this.loadRooms(true);\r\n      this.loadStatistics();\r\n    },\r\n    \r\n    // 加载更多\r\n    loadMore() {\r\n      if (this.hasMore && !this.loading) {\r\n        this.loadRooms();\r\n      }\r\n    },\r\n    \r\n    // Tab切换\r\n    switchTab(tab) {\r\n      if (this.currentTab === tab) return;\r\n      this.currentTab = tab;\r\n      this.refreshData();\r\n    },\r\n    \r\n    // 查看房间详情\r\n    viewRoom(room) {\r\n      uni.navigateTo({\r\n        url: `/pages/room-detail/room-detail?id=${room._id}`\r\n      });\r\n    },\r\n    \r\n    \r\n    // 添加房间\r\n    addRoom() {\r\n      uni.navigateTo({\r\n        url: '/pages/room-edit/room-edit'\r\n      });\r\n    },\r\n    \r\n    // 创建租赁关系\r\n    createRental(room) {\r\n      uni.navigateTo({\r\n        url: `/pages/tenant-info/tenant-info?roomId=${room._id}&action=create`\r\n      });\r\n    },\r\n    \r\n    \r\n    // 终止租赁关系\r\n    terminateRental(room) {\r\n      if (!room.current_rental_id) return;\r\n      \r\n      uni.showModal({\r\n        title: '确认退租',\r\n        content: `确定要终止${room.room_number}号房的租赁关系吗？`,\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              uni.showLoading({ title: '处理中...' });\r\n              \r\n              const result = await uniCloud.callFunction({\r\n                name: 'room-management',\r\n                data: {\r\n                  action: 'terminateRental',\r\n                  data: {\r\n                    rental_id: room.current_rental_id,\r\n                    termination_reason: '正常退租'\r\n                  }\r\n                }\r\n              });\r\n              \r\n              if (result.result.code === 0) {\r\n                uni.showToast({\r\n                  title: '退租成功',\r\n                  icon: 'success'\r\n                });\r\n                this.refreshData();\r\n              } else {\r\n                uni.showToast({\r\n                  title: result.result.message,\r\n                  icon: 'none'\r\n                });\r\n              }\r\n            } catch (error) {\r\n              console.error('退租失败:', error);\r\n              uni.showToast({\r\n                title: '操作失败',\r\n                icon: 'none'\r\n              });\r\n            } finally {\r\n              uni.hideLoading();\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    \r\n    // 获取状态文本\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        available: '可租用',\r\n        rented: '已租用',\r\n        maintenance: '维修中'\r\n      };\r\n      return statusMap[status] || '未知';\r\n    },\r\n    \r\n    // 格式化日期范围\r\n    formatDateRange(startDate, endDate) {\r\n      if (!startDate || !endDate) return '--';\r\n      \r\n      const start = new Date(startDate);\r\n      const end = new Date(endDate);\r\n      \r\n      const formatDate = (date) => {\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        return `${year}-${month}-${day}`;\r\n      };\r\n      \r\n      return `${formatDate(start)} 至 ${formatDate(end)}`;\r\n    },\r\n    \r\n    // 计算剩余天数\r\n    getDaysRemaining(endDate) {\r\n      if (!endDate) return '';\r\n      \r\n      const end = new Date(endDate);\r\n      const now = new Date();\r\n      const diffTime = end - now;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      \r\n      if (diffDays < 0) {\r\n        return '已过期';\r\n      } else if (diffDays === 0) {\r\n        return '今日到期';\r\n      } else if (diffDays <= 7) {\r\n        return `${diffDays}天后到期`;\r\n      } else if (diffDays <= 30) {\r\n        return `${diffDays}天后到期`;\r\n      } else {\r\n        return `${Math.floor(diffDays / 30)}个月后到期`;\r\n      }\r\n    },\r\n    \r\n    // 获取剩余天数样式类\r\n    getDaysRemainingClass(endDate) {\r\n      if (!endDate) return '';\r\n      \r\n      const end = new Date(endDate);\r\n      const now = new Date();\r\n      const diffTime = end - now;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      \r\n      if (diffDays < 0) {\r\n        return 'expired';\r\n      } else if (diffDays <= 7) {\r\n        return 'urgent';\r\n      } else if (diffDays <= 30) {\r\n        return 'warning';\r\n      } else {\r\n        return 'normal';\r\n      }\r\n    },\r\n    \r\n    // 拨打电话\r\n    callTenant(phoneNumber) {\r\n      uni.makePhoneCall({\r\n        phoneNumber: phoneNumber,\r\n        fail: (err) => {\r\n          console.error('拨打电话失败:', err);\r\n          uni.showToast({\r\n            title: '拨打失败',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      });\r\n    },\r\n    \r\n    // 续租\r\n    renewRental(room) {\r\n      if (!room.current_rental_id) return;\r\n      \r\n      uni.navigateTo({\r\n        url: `/pages/rental-renewal/rental-renewal?rentalId=${room.current_rental_id}&roomId=${room._id}`\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  background-color: #f5f5f5;\r\n  min-height: 100vh;\r\n  /* #ifdef H5 */\r\n  padding-bottom: 70px;\r\n  /* #endif */\r\n}\r\n\r\n/* Tab栏样式 */\r\n.tab-bar {\r\n  display: flex;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.tab-item {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 24rpx 12rpx;\r\n  position: relative;\r\n  min-width: 0; /* 防止文字溢出 */\r\n}\r\n\r\n.tab-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n}\r\n\r\n.tab-item.active {\r\n  color: #007AFF;\r\n}\r\n\r\n.tab-item.active::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 60rpx;\r\n  height: 4rpx;\r\n  background-color: #007AFF;\r\n  border-radius: 2rpx;\r\n}\r\n\r\n.tab-text {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.tab-count {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  opacity: 0.8;\r\n}\r\n\r\n.tab-item.active .tab-count {\r\n  color: #007AFF;\r\n}\r\n\r\n\r\n/* 操作栏样式 */\r\n.action-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20rpx;\r\n  background-color: #fff;\r\n  border-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.search-box {\r\n  flex: 1;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 16rpx 20rpx;\r\n  background-color: #f8f9fa;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n  border: none;\r\n}\r\n\r\n.add-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16rpx 24rpx;\r\n  background-color: #007AFF;\r\n  color: white;\r\n  border-radius: 20rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.add-icon {\r\n  font-size: 32rpx;\r\n  margin-right: 8rpx;\r\n}\r\n\r\n.room-list {\r\n  flex: 1;\r\n  padding: 20rpx 0;\r\n}\r\n\r\n.room-list .room-item {\r\n  margin:10rpx 0;\r\n}\r\n\r\n.room-item {\r\n  background-color: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 6rpx 20rpx rgba(0,0,0,0.08);\r\n  border: 1rpx solid #f0f0f0;\r\n  transition: all 0.3s ease;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.room-item:active {\r\n  transform: translateY(2rpx);\r\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.room-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n  padding-bottom: 16rpx;\r\n  border-bottom: 1rpx solid #f5f5f5;\r\n}\r\n\r\n.room-number {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  color: #1a1a1a;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.room-number::before {\r\n  content: '🏠';\r\n  font-size: 32rpx;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 8rpx;\r\n  align-items: center;\r\n}\r\n\r\n.header-btn {\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 22rpx;\r\n  font-weight: 500;\r\n  border: none;\r\n  color: white;\r\n  min-width: 60rpx;\r\n  text-align: center;\r\n}\r\n\r\n\r\n.header-btn.tenant {\r\n  background: linear-gradient(135deg, #722ed1 0%, #9254de 100%);\r\n}\r\n\r\n.header-btn.renewal {\r\n  background: linear-gradient(135deg, #13c2c2 0%, #36cfc9 100%);\r\n}\r\n\r\n.header-btn.terminate {\r\n  background: linear-gradient(135deg, #ff4d4f 0%, #ff7875 100%);\r\n}\r\n\r\n\r\n/* 租户信息卡片 */\r\n.tenant-info-card {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  margin-top: 12rpx;\r\n  color: white;\r\n  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.tenant-main-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.tenant-name-phone {\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n}\r\n\r\n.tenant-name {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.tenant-phone {\r\n  font-size: 26rpx;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n}\r\n\r\n.tenant-status {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.status-badge {\r\n  background-color: rgba(82, 196, 26, 0.2);\r\n  color: #52c41a;\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 22rpx;\r\n  font-weight: bold;\r\n  border: 1rpx solid rgba(82, 196, 26, 0.3);\r\n}\r\n\r\n.rental-period {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.period-text {\r\n  font-size: 24rpx;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  flex: 1;\r\n}\r\n\r\n.days-remaining {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 16rpx;\r\n  margin-top: 8rpx;\r\n}\r\n\r\n.days-remaining.normal {\r\n  background-color: rgba(82, 196, 26, 0.2);\r\n  border: 1rpx solid rgba(82, 196, 26, 0.3);\r\n}\r\n\r\n.days-remaining.warning {\r\n  background-color: rgba(250, 173, 20, 0.2);\r\n  border: 1rpx solid rgba(250, 173, 20, 0.3);\r\n}\r\n\r\n.days-remaining.urgent {\r\n  background-color: rgba(255, 77, 79, 0.2);\r\n  border: 1rpx solid rgba(255, 77, 79, 0.3);\r\n}\r\n\r\n.days-remaining.expired {\r\n  background-color: rgba(140, 140, 140, 0.2);\r\n  border: 1rpx solid rgba(140, 140, 140, 0.3);\r\n}\r\n\r\n.days-text {\r\n  font-size: 24rpx;\r\n  font-weight: bold;\r\n  color: rgba(255, 255, 255, 0.95);\r\n}\r\n\r\n\r\n\r\n.load-more {\r\n  text-align: center;\r\n  padding: 40rpx;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n</style>","import MiniProgramPage from '/Users/peak/Work/room-list/pages/room-list/room-list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":"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"}